<!-- app/views/section_groups/_add_form.html.erb -->
<div class="bg-white rounded-lg shadow p-4">
  <h3 class="text-lg font-semibold mb-3">Add a new group...</h3>
  
  <div class="mb-4">
    <input type="text" placeholder="Enter group name..." class="w-full p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500" data-section-target="newGroupName">
  </div>
  
  <div class="flex justify-between items-center">
    <% available_groups = organization.groups.where.not(id: section.groups.pluck(:id)) %>
    <% if available_groups.any? %>
      <div>
        <button type="button" data-action="click->section#toggleExistingGroups" class="text-blue-500 hover:text-blue-700">
          Or select existing group
        </button>
        <div class="mt-2 hidden" data-section-target="existingGroups">
          <select class="w-full p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500" data-section-target="groupSelect">
            <option value="">Select a group/area</option>
            <% available_groups.each do |group| %>
              <option value="<%= group.id %>"><%= group.name %></option>
            <% end %>
          </select>
        </div>
      </div>
    <% else %>
      <div class="text-gray-500 text-sm">
        No more groups available.
        <%= link_to "Create new ones", organization_groups_path(organization), class: "text-blue-500 hover:underline" %>
      </div>
    <% end %>
    
    <div class="flex space-x-2">
      <button type="button" data-action="click->section#cancelGroupForm" class="px-3 py-1.5 bg-gray-100 text-gray-700 rounded hover:bg-gray-200">
        Cancel
      </button>
      <button type="button" data-action="click->section#addGroup" class="px-3 py-1.5 bg-green-500 text-white rounded hover:bg-green-600">
        Add this group
      </button>
    </div>
  </div>
</div>