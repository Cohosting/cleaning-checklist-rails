<div class="checklist-container">
  <h2 class="checklist-header">Checklist: <%= @checklist.name %></h2>
  <p><strong>Property:</strong> <%= @checklist.property.name %></p>

  <h3>Tasks</h3>
  <ul class="task-list">
    <% @checklist.tasks.each do |task| %>
      <li class="task-item">
        <%= form_with model: [@checklist.property, @checklist, task], method: :patch do |f| %>
          <%= f.check_box :completed, checked: task.completed, onchange: "this.form.submit();" %>
          <%= task.name %>
        <% end %>
        <%= link_to "❌", property_checklist_task_path(@checklist.property, @checklist, task), method: :delete, class: "delete-btn" %>
      </li>
    <% end %>
  </ul>

  <h3>Add New Task</h3>
  <%= form_with model: [@checklist.property, @checklist, Task.new] do |f| %>
    <%= f.text_field :name, class: "border p-2 rounded w-full", placeholder: "Task name" %>
    <%= f.submit "Add", class: "btn" %>
  <% end %>

  <%= link_to 'Back to Checklists', property_path(@checklist.property), class: "btn" %>
</div>
